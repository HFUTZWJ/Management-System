<!DOCTYPE html>
<html lang="en">
<head>
    <script src="./js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript"></script>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<span id="cargolist">货物类型：

</span>
<input type="button" name="inquiresku" value = "查询" onclick="inquire()">

    <table id="tab">
    <thead>
    <tr>
        <td>SId</td>
        <td>SName</td>
        <td>CId</td>
        <td>WId</td>
    </tr>
    </thead>
    <tbody id='tbody1'>

    </tbody>
    </table>
    <script>
        $.ajax(
            {
                url: "/find",
                type:"post",
                dataType: "json",
                success: function(data){
                    fillData(data);
                },
                error: function (msg) {
                    alert(msg);
                }
            }
        );
        //动态生成下拉框
        var rad = document.getElementById("cargolist");
        function fillData(data) {
            var fillrad = document.createElement('select');
            fillrad.setAttribute("id","cargoname");
            //生成选项
            for (var i = 0; i < data.length; i++) {
                var _option = document.createElement("option");
                _option.value = data[i].id;
                _option.text = data[i].name;
                fillrad.appendChild(_option);
            }
            rad.appendChild(fillrad);
        }
        function inquire() {
            var obj = document.getElementById("cargoname");//所选中的下拉框选项
            var index = obj.selectedIndex; // 选中索引
            var cargo_id = obj.options[index].value;//取值
            var jsonob = {
                "cargo_id": cargo_id//向后台传入货物类型进行查询
            };
            $.ajax(
                {
                    url:"/getsku",
                    type: "get",
                    dataType: "json",
                    data: jsonob,
                    async: false,
                    success: function (data) {
                        showData(data);
                    },
                    error: function(msg) {
                        alert(msg);
                    }
                }
            )
        }
        function showData(data) {
            for (var i = 0; i < data.length; i++) {
                var tr = document.createElement('tr');
                var tsku_id = document.createElement('td');
                var tsku_name = document.createElement('td');
                var tcargo_id = document.createElement('td');
                var tware_id = document.createElement('td');
                tsku_id.innerHTML = data[i].sku_id;
                tsku_name.innerHTML = data[i].sku_name;
                tcargo_id.innerHTML = data[i].cargo_id;
                tware_id.innerHTML = data[i].ware_id;
                tr.appendChild(tsku_id);
                tr.appendChild(tsku_name);
                tr.appendChild(tcargo_id);
                tr.appendChild(tware_id);
                var tbody = document.getElementById('tbody1');
                tbody.appendChild(tr);
            }
        }

    </script>
</body>

</html>